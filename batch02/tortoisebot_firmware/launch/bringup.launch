<?xml version="1.0" ?>

<launch>

	<arg name="joy" default="false"/>

    <param command="$(find xacro)/xacro $(find tortoisebot_description)/urdf/tortoisebot.xacro" name="robot_description"/>

    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

    <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher"/>

    <node name="differential" pkg="tortoisebot_firmware" type="differential.py" output="screen"/>

    <node name="odom" pkg="tortoisebot_firmware" type="odom_pub.py" output="screen"/>


    <include file="$(find tortoisebot_firmware)/launch/tortoiselidarS2.launch" />

    <include file="$(find raspicam_node)/launch/camerav2_410x308_30fps.launch" />

    <!--   <node name="camera" pkg="tortoisebot_camera" type="camera_node.py" /> -->    

    <group if="$(arg joy)">
        <include file="$(find tortoisebot_firmware)/launch/joy_control.launch" />
    </group>

    <!-- <include file="$(find tortoisebot_firmware)/launch/server_bringup.launch" /> -->
    <node name="launcher_api_node" pkg="tortoisebot_launcher_api" type="launcher_api.py" output="log"/>

<!-- ros web bridge -->
    <include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch"></include>

<!-- image web stream -->
    <node name="web_video_server_node" pkg="web_video_server" type="web_video_server" output="screen">
        <param name="port" value="9000" />
        <param name="image_transport" value="compressed"/>
    </node>
	<!-- robot pose publisher -->
  <node name="robot_pose_publisher" pkg="robot_pose_publisher" type="robot_pose_publisher"/>
</launch>
